local ScreenGui = Instance.new("ScreenGui")
local ImageButton = Instance.new("ImageButton")
local UICorner = Instance.new("UICorner")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

ImageButton.Parent = ScreenGui
ImageButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ImageButton.BorderSizePixel = 0
ImageButton.Position = UDim2.new(0.10615778, 0, 0.16217947, 0)
ImageButton.Size = UDim2.new(0, 40, 0, 40)
ImageButton.Draggable = true
ImageButton.Image = "http://www.roblox.com/asset/?id=15059956542"

UICorner.CornerRadius = UDim.new(1, 10) 
UICorner.Parent = ImageButton

ImageButton.MouseButton1Down:Connect(function()
    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.End, false, game)
end)

local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
repeat wait() until game:IsLoaded()
local Window = Fluent:CreateWindow({
    Title = "T√©o üçév2 update =}",
    SubTitle = "vip proüíéüòç",
    TabWidth = 157,
    Size = UDim2.fromOffset(450, 300),
    Acrylic = true,
    Theme = "Amethyst",
    MinimizeKey = Enum.KeyCode.End
})
local Tabs = {
        Main0=Window:AddTab({ Title="m·ªôt s·ªë k√™nhü§ì" }),
        Main1=Window:AddTab({ Title="grow a gaden üå±üå¥üåµüå≤" }),
        Main2=Window:AddTab({ Title="bran r√≥tüí©" }),
        Main3=Window:AddTab({ Title="99 ƒë√™mü•∑" }),
        Main4=Window:AddTab({ Title="blox fruitüçé" }),
       Main5=Window:AddTab({ Title="plan vs branroüå≤üêòt" }),
       Settings = Window:AddTab({ Title = "‚öôÔ∏èC√†i ƒë·∫∑t" }),
       Main6=Window:AddTab({ Title="ch·ª©c nƒÉng linh tinh" }),
}
    Tabs.Main0:AddButton({
    Title = "tiktok b·∫°n:)",
    Description = "o√°ch x√† l√°ch v√¥ c√πng",
    Callback = function()
        setclipboard("https://www.tiktok.com/@jannie3342?_t=ZS-90QsJQ5j0NO&_r=1")
    end
})

    Tabs.Main0:AddButton({
    Title = "tik",
    Description = "l√†m ch∆°i thui",
    Callback = function()
        setclipboard("https://www.tiktok.com/@b.yt03?_t=ZS-90QsHokNlwN&_r=1")
    end
})

    Tabs.Main0:AddButton({
    Title = "tiktok",
    Description = "fl tiktok ƒë·ªÉ bi·∫øt th√™m nhi·ªÅu script",
    Callback = function()
        setclipboard("https://www.tiktok.com/@b.yt03?_t=ZS-90QsHmSjaiu&_r=1")
    end
})
Tabs.Main1:AddButton({
    Title="speed hubüå±",
    Description="script n√†y ngon √° ƒë·ªß ch·ª©c nƒÉng c·∫£üòÉ",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))()
  end
})

Tabs.Main1:AddButton({
    Title="ThundeZ‚ö°",
    Description="c√°i n√†y c≈©ng ngon ",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/ThundeZ/GrowAGardenScript/refs/heads/main/ThunderZHub.lua"))()
  end
})

Tabs.Main1:AddButton({
    Title="Nathub",
    Description="·ªïn üòã",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://get.nathub.xyz/loader"))()
  end
})

Tabs.Main2:AddButton({
    Title="utopia",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}

  end
})

Tabs.Main2:AddButton({
    Title="airhub",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/og2xn/AirHubs/refs/heads/main/Protected_3429231241525986.lua"))()
  end
})

Tabs.Main2:AddButton({
    Title="moondiety",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet('https://raw.githubusercontent.com/m00ndiety/Moondiety/refs/heads/main/Loader'))()
  end
})

Tabs.Main2:AddButton({
    Title="B0oe",
    Description="c√≤n d√πng ƒëc",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://pastefy.app/B0oeOAsg/raw"))()
  end
})

Tabs.Main2:AddButton({
    Title="VN üáªüá≥üáªüá≥üáªüá≥",
    Description="script c·ªßa ng vi·ªát l√†m üáªüá≥",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/replit8173/VietnamHub/refs/heads/main/VietnamseHub.lua", true))()
  end
})

Tabs.Main2:AddButton({
    Title="chillhubüòå",
    Description="c√°i n√†y ·ªïn d√πng ngon no key",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua"))()
  end
})

Tabs.Main2:AddButton({
    Title="ajjanüë®‚Äçüíª",
    Description=" script n√†y ƒëi·ªÅu khi·ªÉn c·∫£ ng ch∆°i lu√¥n m√† üòÄ",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/onliengamerop/Steal-a-brainrot/refs/heads/main/Protected_3771863424757750.lua.txt"))()
  end
})

Tabs.Main2:AddButton({
    Title="Lemon update",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://pastefy.app/MJw2J4T6/raw"))()
  end
})

Tabs.Main2:AddButton({
    Title="Kurdhubüòç",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Ninja10908/S4/refs/heads/main/Kurdhub"))()
  end
})

Tabs.Main2:AddButton({
    Title="khngscript hub",
    Description="duper bram rot",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/BestScript-cmd/Khangdz28/refs/heads/main/KhgScripttt"))()
  end
})

Tabs.Main2:AddButton({
    Title="script t·∫°o seven vip",
    Description="t·∫°o seven vip",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/JoshzzAlteregooo/FreePrivateServer/refs/heads/main/UniversalFreePrivateServerByJoshzz"))()
  end
})

Tabs.Main2:AddButton({
    Title="ZZZz hub ",
    Description="c∆∞·ªõp t√†ng h√¨nh",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://pastefy.app/DHyT4Zoi/raw"))()
  end
})

Tabs.Main:AddButton({
    Title="bonkhub",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://bonkhub.online/loader.lua",true))()
  end
})

Tabs.Main3:AddButton({
    Title="1 b·∫£n kh√° ngon ·ªõi",
    Description="ko n√™n quay c√≥ nh·∫°c b·∫£n quy·ªÅn",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/DarkenedEssence/Elude/refs/heads/main/External/Diamond/ELUDESJI.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="fam k·∫πo cps üòãüç•",
    Description="m·ªõi n√™n c√≤n d√πng ƒëc",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/c87b3621b22ecc2c8b474f95c47ecb40.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="fam keo si√™u x·ªãn :))",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet('https://raw.githubusercontent.com/MQPS7/99-Night-in-the-Forset/refs/heads/main/CandyFarm'))()
  end
})

Tabs.Main3:AddButton({
    Title="FNdayfam",
    Description=" Si√™u script v·ª´a fam ng√†y v·ª´a kim c∆∞∆°ng si√™u ngon",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet('https://raw.githubusercontent.com/caomod2077/Script/refs/heads/main/FNDayFarm.lua'))()
  end
})

Tabs.Main3:AddButton({
    Title="thunder",
    Description="c√°i n√†y auto ƒëam ng√†y v√† kc",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/NAVAAI098/Thunder-Hub/main/Kaitun.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="combo newüòç",
    Description="no key ngon √° full ti·∫øng vi·ªát",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/checkurasshole/Trt/refs/heads/main/999NIGH"))()
  end
})

Tabs.Main3:AddButton({
    Title="FoxnameHub",
    Description="c√°i n√†y no key m√† ngon üòã",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/caomod2077/Script/refs/heads/main/FoxnameHub.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="H4x",
    Description="c√≥ key ngon l·∫Ømüòãüòã",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/H4xScripts/Loader/refs/heads/main/loader.lua", true))()
  end
})

Tabs.Main3:AddButton({
    Title="NEW script",
    Description=" key n√® (toatsyissexy) c√≥ th·ªÉ s·∫Ω thay ƒë·ªïi",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/nouralddin-abdullah/99-night/refs/heads/main/main-en.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="auto ch∆°i game",
    Description=" nokey",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Rx1m/CpsHub/refs/heads/main/DayFarm%E2%84%A2",true))()
  end
})

Tabs.Main3:AddButton({
    Title="auto ƒëam kim c∆∞∆°ng",
    Description=" ngon √° n√≥ ch·ªâ t√¨m sever c√≥ kim c∆∞∆°ng ch·ªâ c·∫ßn b·∫≠t",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
getgenv().hop = "old"
getgenv().reducelag = true
getgenv().blackscreen = false
getgenv().AutoFarm = false
getgenv().autoexecuter = true
getgenv().WebhookURL = "" --If not used do not write anything
loadstring(game:HttpGet("https://raw.githubusercontent.com/caomod2077/Script/refs/heads/main/FoxnameFarmdiamond.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="void",
    Description="nokey ",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/VapeVoidware/VW-Add/main/nightsintheforest.lua", true))()
  end
})

Tabs.Main3:AddButton({
    Title="cps",
    Description="._.",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Rx1m/CpsHub/refs/heads/main/Hub",true))()
  end
})

Tabs.Main3:AddButton({
    Title="b·∫•t con m·∫π n√≥ t·ª≠",
    Description=" ch·ªâ b·∫•t t·ª≠ no key",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/ProBaconHub/DATABASE/refs/heads/main/99%20Nights%20in%20the%20Forest/Infinite%20Health.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="auto fam diamon",
    Description=" ƒë·ªÉu h∆°n b·∫£n tr√™n",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Bubu2k/Rubutv/refs/heads/main/Framkimcuong",true))()
  end
})

Tabs.Main3:AddButton({
    Title="vector",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/AAwful /Vector_Hub/0/v2"))()
  end
})

Tabs.Main3:AddButton({
    Title=".fam diamon",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet('https://raw.githubusercontent.com/MQPS7/99-Night-in-the-Forset/refs/heads/main/Gfarm'))()
  end
})

Tabs.Main3:AddButton({
    Title="auto fam kc cps",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Rx1m/CpsHub/refs/heads/main/CpsX",true))()
  end
})

Tabs.Main3:AddButton({
    Title="cps hub",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Rx1m/CpsHub/refs/heads/main/Hub",true))()
  end
})

Tabs.Main4:AddButton({
    Title="Redüòç",
    Description="ngon nh·∫•t hi√™nh t·∫°i r",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/tlredz/Scripts/refs/heads/main/main.luau"))(Settings)
  end
})

Tabs.Main4:AddButton({
    Title="BlueX",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Dev-BlueX/BlueX-Hub/refs/heads/main/Main.lua"))()
  end
})

Tabs.Main5:AddButton({
    Title="speed hub",
    Description="kh√° ·ªïn ƒë·∫ßy ƒë·ªß",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))()
  end
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local StarterGui = game:GetService("StarterGui")

Tabs.Settings:AddToggle("LagFix_Super", {
    Title = "üßπ Fix Lag  si√™u c·∫•p xo√°",
    Description = "Xo√° to√†n b·ªô map, gi·ªØ l·∫°i nh√¢n v·∫≠t v√† ƒë·ªì ho·∫° c∆° b·∫£n nh·∫•t",
    Default = false,
    Callback = function(state)
        if state then
            -- Th√¥ng b√°o GUI
            StarterGui:SetCore("SendNotification", {
                Title = "‚öôÔ∏è Fix Lag Si√™u M·∫°nh",
                Text = "ƒêang xo√° map v√† gi·∫£m ƒë·ªì ho·∫°...",
                Duration = 4
            })

            -- Gi·∫£m ch·∫•t l∆∞·ª£ng h√¨nh ·∫£nh
            settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
            game.Lighting.GlobalShadows = false
            game.Lighting.FogEnd = 9e9

            -- Xo√° map l·ªõn: ch·ªâ gi·ªØ l·∫°i nh√¢n v·∫≠t v√† camera
            for _,v in pairs(workspace:GetChildren()) do
                if not (v == LocalPlayer.Character or v.Name == "Camera" or v:FindFirstChildOfClass("Humanoid")) then
                    v:Destroy()
                end
            end

            -- Xo√° m·ªçi hi·ªáu ·ª©ng
            for _,v in pairs(workspace:GetDescendants()) do
                if v:IsA("Decal") or v:IsA("Texture") or v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") then
                    v:Destroy()
                elseif v:IsA("BasePart") then
                    v.Material = Enum.Material.Plastic
                    v.Reflectance = 0
                end
            end

            StarterGui:SetCore("SendNotification", {
                Title = "‚úÖ Th√†nh c√¥ng!",
                Text = "Fix lag si√™u m·∫°nh ƒë√£ b·∫≠t. Map l·ªõn ƒë√£ b·ªã xo√°.",
                Duration = 5
            })
            print("üî• Fix lag si√™u m·∫°nh ƒë√£ b·∫≠t - map l·ªõn ƒë√£ b·ªã xo√°")

        else
            StarterGui:SetCore("SendNotification", {
                Title = "‚ùå ƒê√£ t·∫Øt Fix Lag",
                Text = "Mu·ªën kh√¥i ph·ª•c map th√¨ reload game nha.",
                Duration = 5
            })
            print("‚ùå Fix lag si√™u m·∫°nh ƒë√£ t·∫Øt (c·∫ßn reload map ƒë·ªÉ kh√¥i ph·ª•c)")
        end
    end
})
Tabs.Settings:AddToggle("AutoFixLag", {
    Title = "‚öôÔ∏è Fix Lag Pro",
    Description = "B·∫≠t ƒë·ªÉ t·ª± t·ªëi ∆∞u hi·ªáu su·∫•t li√™n t·ª•c",
    Default = false,
    Callback = function(state)
        if state then
            -- Khi b·∫≠t ‚úÖ
            print("üü¢ ƒê√£ b·∫≠t Auto Fix Lag")

            -- ‚öôÔ∏è To√†n b·ªô code fix lag auto
            local Players = game:GetService("Players")
            local Lighting = game:GetService("Lighting")
            local Workspace = game:GetService("Workspace")
            local RunService = game:GetService("RunService")
            local player = Players.LocalPlayer

            local function safeCall(fn, ...)
                local ok, res = pcall(fn, ...)
                return ok, res
            end

            local function applyLightingFix()
                safeCall(function()
                    Lighting.GlobalShadows = false
                    Lighting.FogEnd = 999999
                    Lighting.FogStart = 999999
                    Lighting.Brightness = 1
                    Lighting.EnvironmentDiffuseScale = 0
                    Lighting.EnvironmentSpecularScale = 0
                    for _, e in ipairs(Lighting:GetChildren()) do
                        if e:IsA("BlurEffect") or e:IsA("BloomEffect")
                        or e:IsA("ColorCorrectionEffect") or e:IsA("DepthOfFieldEffect")
                        or e:IsA("SunRaysEffect") or e:IsA("Atmosphere") then
                            e.Enabled = false
                        end
                    end
                end)
            end

            local function applyTerrainFix()
                safeCall(function()
                    local t = Workspace:FindFirstChildOfClass("Terrain")
                    if t then
                        t.WaterWaveSize = 0
                        t.WaterReflectance = 0
                        t.WaterTransparency = 1
                        t.Decoration = false
                    end
                end)
            end

            local function applyCameraFix()
                safeCall(function()
                    local cam = Workspace.CurrentCamera
                    if cam then cam.FieldOfView = 70 end
                end)
            end

            local function applyPlayerFix()
                safeCall(function()
                    if player and player.Character then
                        for _, c in ipairs(player.Character:GetChildren()) do
                            if c:IsA("Accessory") or c:IsA("Clothing") or c:IsA("Shirt") or c:IsA("Pants") then
                                c:Destroy()
                            end
                        end
                    end
                end)
            end

            local function applyObjectSimplify(obj)
                safeCall(function()
                    if not obj or not obj.Parent then return end
                    if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam")
                    or obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("Sparkles") then
                        obj.Enabled = false
                        return
                    end
                    if obj:IsA("Decal") or obj:IsA("Texture") then
                        obj.Transparency = 1
                        return
                    end
                    if obj:IsA("BasePart") then
                        local s = obj.Size
                        if s and s.X and s.Y and s.Z then
                            if s.X < 1 and s.Y < 1 and s.Z < 1 then
                                obj.Transparency = 1
                            end
                        end
                        obj.Material = Enum.Material.SmoothPlastic
                        obj.Reflectance = 0
                    end
                end)
            end

            local function applyToAllExisting()
                applyLightingFix()
                applyTerrainFix()
                applyCameraFix()
                applyPlayerFix()
                for _, obj in ipairs(Workspace:GetDescendants()) do
                    applyObjectSimplify(obj)
                end
                safeCall(function() collectgarbage("collect") end)
            end

            Workspace.DescendantAdded:Connect(function(obj)
                task.defer(function()
                    applyObjectSimplify(obj)
                end)
            end)

            local sweeping = false
            task.spawn(function()
                applyToAllExisting()
                while state do
                    task.wait(1)
                    if not sweeping then
                        sweeping = true
                        task.spawn(function()
                            local all = Workspace:GetDescendants()
                            local chunkSize = 250
                            local i = 1
                            while i <= #all do
                                local j = math.min(i + chunkSize - 1, #all)
                                for k = i, j do
                                    applyObjectSimplify(all[k])
                                end
                                i = j + 1
                                task.wait(0)
                            end
                            applyLightingFix()
                            applyTerrainFix()
                            applyCameraFix()
                            applyPlayerFix()
                            safeCall(function() collectgarbage("collect") end)
                            sweeping = false
                        end)
                    end
                end
            end)

        else
            -- Khi t·∫Øt üî¥
            print("üî¥ ƒê√£ t·∫Øt Auto Fix Lag")
        end
    end
})
Tabs.Main6:AddButton({
    Title="ambot :))",
    Description="am c√°c game b·∫Ø. s√∫ng g√≥c 1",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
-- AIMBOT TRAINER (Upgrade Full Auto) - Learning / Studio only
-- D√πng cho h·ªçc/testing trong Roblox Studio
-- D√°n v√†o StarterPlayer -> StarterPlayerScripts (LocalScript)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Camera = workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

-- ==== UI Creation (persistent across respawn) ====
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AimbotPanel"
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

local frame = Instance.new("Frame")
frame.Name = "MainFrame"
frame.Size = UDim2.new(0, 200, 0, 110)

local savedXScale = LocalPlayer:GetAttribute("Aimbot_XScale")
local savedXOffset = LocalPlayer:GetAttribute("Aimbot_XOffset")
local savedYScale = LocalPlayer:GetAttribute("Aimbot_YScale")
local savedYOffset = LocalPlayer:GetAttribute("Aimbot_YOffset")

if savedXScale and savedXOffset and savedYScale and savedYOffset then
	frame.Position = UDim2.new(savedXScale, savedXOffset, savedYScale, savedYOffset)
else
	frame.Position = UDim2.new(0.5, -100, 0.78, 0)
end

frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.Active = true
frame.Parent = screenGui

local uic = Instance.new("UICorner", frame)
uic.CornerRadius = UDim.new(0,8)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,0,0,28)
title.BackgroundTransparency = 1
title.Text = "Aimbot Trainer"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18

local masterBtn = Instance.new("TextButton", frame)
masterBtn.Size = UDim2.new(1, -20, 0, 28)
masterBtn.Position = UDim2.new(0,10,0,34)
masterBtn.Text = "üî¥ SCRIPT: OFF"
masterBtn.Font = Enum.Font.SourceSans
masterBtn.TextSize = 16
masterBtn.BackgroundColor3 = Color3.fromRGB(120, 0, 0)
masterBtn.TextColor3 = Color3.fromRGB(255,255,255)

local v1Btn = Instance.new("TextButton", frame)
v1Btn.Size = UDim2.new(0.5, -12, 0, 28)
v1Btn.Position = UDim2.new(0,10,0,68)
v1Btn.Text = "V1: CLICK SHOOT"
v1Btn.Font = Enum.Font.SourceSans
v1Btn.TextSize = 14
v1Btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
v1Btn.TextColor3 = Color3.fromRGB(255,255,255)

local v2Btn = Instance.new("TextButton", frame)
v2Btn.Size = UDim2.new(0.5, -12, 0, 28)
v2Btn.Position = UDim2.new(0.5,6,0,68)
v2Btn.Text = "V2: CAMERA FOLLOW"
v2Btn.Font = Enum.Font.SourceSans
v2Btn.TextSize = 14
v2Btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
v2Btn.TextColor3 = Color3.fromRGB(255,255,255)

-- ==== Dragging ====
local dragging = false
local dragStart
local startPos
frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
				local p = frame.Position
				LocalPlayer:SetAttribute("Aimbot_XScale", p.X.Scale)
				LocalPlayer:SetAttribute("Aimbot_XOffset", p.X.Offset)
				LocalPlayer:SetAttribute("Aimbot_YScale", p.Y.Scale)
				LocalPlayer:SetAttribute("Aimbot_YOffset", p.Y.Offset)
			end
		end)
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
		local delta = input.Position - dragStart
		frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)

-- ==== State vars ====
local enabled = false
local V1_enabled = false
local V2_enabled = false

local currentTarget = nil
local targetHumanoidConn = nil
local targetHealthConn = nil
local targetHighlight = nil

-- helper: is valid target
local function isValidTarget(plr)
	if not plr or plr == LocalPlayer then return false end
	if not plr.Character then return false end
	local humanoid = plr.Character:FindFirstChild("Humanoid")
	local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
	if not humanoid or not hrp then return false end
	if humanoid.Health <= 0 then return false end
	local myTeam = LocalPlayer.Team
	if myTeam and plr.Team == myTeam then return false end
	return true
end

-- CHECK LINE OF SIGHT: tr·∫£ v·ªÅ true n·∫øu KH√îNG b·ªã v·∫≠t c·∫£n (t·ª©c l√† c√≥ LOS)
local function hasLineOfSight(player, target)
	if not player or not target then return false end
	if not player.Character then return false end
	if not target.Character then return false end

	local originPart = player.Character:FindFirstChild("Head") or player.Character:FindFirstChild("HumanoidRootPart")
	local targetPart = target.Character:FindFirstChild("Head") or target.Character:FindFirstChild("HumanoidRootPart")
	if not originPart or not targetPart then return false end

	local origin = originPart.Position
	local direction = (targetPart.Position - origin)
	if direction.Magnitude <= 0 then return true end

	local rp = RaycastParams.new()
	-- exclude self so ray won't hit the player's own parts
	rp.FilterDescendantsInstances = {player.Character}
	rp.FilterType = Enum.RaycastFilterType.Exclude
	rp.IgnoreWater = true

	local ray = workspace:Raycast(origin, direction, rp)
	if not ray then
		-- nothing hit -> clear line
		return true
	end

	-- if ray hit something that is part of the target's character, then visible
	if ray.Instance and ray.Instance:IsDescendantOf(target.Character) then
		return true
	end

	-- else ray hit some other object => blocked
	return false
end

-- find nearest visible enemy (prioritize LOS)
local function getNearestEnemy()
	local nearest = nil
	local shortest = math.huge
	if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
		return nil
	end
	local myPos = LocalPlayer.Character.HumanoidRootPart.Position
	for _, p in pairs(Players:GetPlayers()) do
		if isValidTarget(p) then
			local hrp = p.Character:FindFirstChild("HumanoidRootPart")
			if hrp then
				-- check LOS first
				if hasLineOfSight(LocalPlayer, p) then
					local d = (hrp.Position - myPos).Magnitude
					if d < shortest then
						shortest = d
						nearest = p
					end
				end
			end
		end
	end
	-- if no visible target found, return nil (so script won't lock through walls)
	return nearest
end

-- create target marker
local function createTargetMarker(target)
	if not target or not target.Character then return nil end
	local head = target.Character:FindFirstChild("Head")
	if not head then return nil end
	local bb = Instance.new("BillboardGui")
	bb.Name = "Aimbot_TargetMark"
	bb.Adornee = head
	bb.Size = UDim2.new(0,100,0,28)
	bb.StudsOffset = Vector3.new(0, 1.4, 0)
	bb.AlwaysOnTop = true
	bb.Parent = PlayerGui

	local label = Instance.new("TextLabel", bb)
	label.Size = UDim2.new(1,0,1,0)
	label.BackgroundTransparency = 1
	label.Text = "TARGET"
	label.Font = Enum.Font.SourceSansBold
	label.TextSize = 18
	label.TextColor3 = Color3.fromRGB(255,50,50)
	label.TextStrokeTransparency = 0.6

	return bb
end

-- clear current target
local function clearCurrentTarget()
	if targetHighlight and targetHighlight.Parent then
		targetHighlight:Destroy()
		targetHighlight = nil
	end
	if targetHealthConn then
		targetHealthConn:Disconnect()
		targetHealthConn = nil
	end
	if targetHumanoidConn then
		targetHumanoidConn:Disconnect()
		targetHumanoidConn = nil
	end
	currentTarget = nil
end

-- set target
local function setCurrentTarget(p)
	if p == currentTarget then return end
	clearCurrentTarget()
	if not p then return end
	currentTarget = p

	pcall(function()
		targetHighlight = createTargetMarker(p)
	end)

	if p.Character then
		local humanoid = p.Character:FindFirstChild("Humanoid")
		if humanoid then
			targetHealthConn = humanoid.HealthChanged:Connect(function(h)
				if h <= 0 then clearCurrentTarget() end
			end)
			targetHumanoidConn = humanoid.Died:Connect(function() clearCurrentTarget() end)
		end
	end
end

-- shoot function
local function shootAtTarget(target)
	if not target or not target.Character then return end
	-- ensure visible
	if not hasLineOfSight(LocalPlayer, target) then
		-- blocked by obstacle; do not fire
		print("üî¥ Target blocked by obstacle - not firing")
		return
	end

	local head = target.Character:FindFirstChild("Head")
	local hrp = target.Character:FindFirstChild("HumanoidRootPart")
	if not head and not hrp then return end
	local aimPos = (head and head.Position) or hrp.Position

	local rp = RaycastParams.new()
	rp.FilterType = Enum.RaycastFilterType.Blacklist
	if LocalPlayer.Character then rp.FilterDescendantsInstances = {LocalPlayer.Character} end

	local origin = Camera.CFrame.Position
	local direction = (aimPos - origin)
	local ray = workspace:Raycast(origin, direction, rp)

	local mark = Instance.new("Part")
	mark.Name = "AimbotHitMarker"
	mark.Size = Vector3.new(0.2,0.2,0.2)
	mark.Shape = Enum.PartType.Ball
	mark.Anchored = true
	mark.CanCollide = false
	mark.Material = Enum.Material.Neon
	mark.Color = Color3.fromRGB(255, 60, 60)
	if ray and ray.Position then
		mark.CFrame = CFrame.new(ray.Position)
	else
		mark.CFrame = CFrame.new(aimPos)
	end
	mark.Parent = workspace
	game:GetService("Debris"):AddItem(mark, 0.35)

	if target then
		print(("üü¢ Fire demo -> %s (hp: %s)"):format(target.Name, tostring((target.Character and target.Character:FindFirstChild("Humanoid") and target.Character.Humanoid.Health) or "N/A")))
	end
end

-- Mouse click V1
local mouseConn = nil
local function bindMouseClick()
	if mouseConn then return end
	mouseConn = Mouse.Button1Down:Connect(function()
		if enabled and V1_enabled then
			local tgt = getNearestEnemy()
			setCurrentTarget(tgt)
			if tgt then
				shootAtTarget(tgt)
			else
				print("No visible enemy to shoot (blocked or none)")
			end
		end
	end)
end
local function unbindMouseClick()
	if mouseConn then
		mouseConn:Disconnect()
		mouseConn = nil
	end
end

-- Main loop: V2 camera follow & auto nearest target
RunService.RenderStepped:Connect(function()
	if not enabled then return end
	if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end

	if V2_enabled then
		local tgt = getNearestEnemy()
		setCurrentTarget(tgt)
		if tgt and tgt.Character and tgt.Character:FindFirstChild("Head") then
			-- ensure visible before locking camera
			if hasLineOfSight(LocalPlayer, tgt) then
				local headPos = tgt.Character.Head.Position
				local camPos = Camera.CFrame.Position
				Camera.CFrame = CFrame.new(camPos, headPos)
			else
				-- target blocked: optionally clear marker or keep until visible
				-- clearCurrentTarget()
			end
		end
	end
end)

-- Buttons events
masterBtn.MouseButton1Click:Connect(function()
	enabled = not enabled
	if enabled then
		masterBtn.Text = "üü¢ SCRIPT: ON"
		masterBtn.BackgroundColor3 = Color3.fromRGB(0,170,0)
		bindMouseClick()
	else
		masterBtn.Text = "üî¥ SCRIPT: OFF"
		masterBtn.BackgroundColor3 = Color3.fromRGB(120,0,0)
		unbindMouseClick()
		clearCurrentTarget()
	end
end)

v1Btn.MouseButton1Click:Connect(function()
	V1_enabled = not V1_enabled
	if V1_enabled then
		v1Btn.BackgroundColor3 = Color3.fromRGB(0,150,200)
	else
		v1Btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
	end
	if enabled and V1_enabled then bindMouseClick() end
end)

v2Btn.MouseButton1Click:Connect(function()
	V2_enabled = not V2_enabled
	if V2_enabled then
		v2Btn.BackgroundColor3 = Color3.fromRGB(200,80,80)
	else
		v2Btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
	end
end)

-- CharacterAdded handler
LocalPlayer.CharacterAdded:Connect(function(char)
	char:WaitForChild("HumanoidRootPart", 5)
	if not screenGui.Parent then
		screenGui.Parent = PlayerGui
	end
	local sx = LocalPlayer:GetAttribute("Aimbot_XScale")
	local xo = LocalPlayer:GetAttribute("Aimbot_XOffset")
	local sy = LocalPlayer:GetAttribute("Aimbot_YScale")
	local yo = LocalPlayer:GetAttribute("Aimbot_YOffset")
	if sx and xo and sy and yo then
		frame.Position = UDim2.new(sx, xo, sy, yo)
	end
end)

-- Cleanup
LocalPlayer.AncestryChanged:Connect(function()
	if not PlayerGui:IsDescendantOf(game) then
		unbindMouseClick()
	end
end)

print("Aimbot Trainer FULL AUTO (learning demo) loaded. V1 -> click shoot nearest visible, V2 -> camera follow nearest visible.")
  end
})
