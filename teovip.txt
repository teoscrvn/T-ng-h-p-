local ScreenGui = Instance.new("ScreenGui")
local ImageButton = Instance.new("ImageButton")
local UICorner = Instance.new("UICorner")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

ImageButton.Parent = ScreenGui
ImageButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ImageButton.BorderSizePixel = 0
ImageButton.Position = UDim2.new(0.10615778, 0, 0.16217947, 0)
ImageButton.Size = UDim2.new(0, 40, 0, 40)
ImageButton.Draggable = true
ImageButton.Image = "http://www.roblox.com/asset/?id=15059956542"

UICorner.CornerRadius = UDim.new(1, 10) 
UICorner.Parent = ImageButton

ImageButton.MouseButton1Down:Connect(function()
    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.End, false, game)
end)

local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
repeat wait() until game:IsLoaded()
local Window = Fluent:CreateWindow({
    Title = "Téo 🍎v2 update =}",
    SubTitle = "vip pro💎😍",
    TabWidth = 157,
    Size = UDim2.fromOffset(450, 300),
    Acrylic = true,
    Theme = "Amethyst",
    MinimizeKey = Enum.KeyCode.End
})
local Tabs = {
        Main0=Window:AddTab({ Title="một số kênh🤓" }),
        Main1=Window:AddTab({ Title="grow a gaden 🌱🌴🌵🌲" }),
        Main2=Window:AddTab({ Title="bran rót💩" }),
        Main3=Window:AddTab({ Title="99 đêm🥷" }),
        Main4=Window:AddTab({ Title="blox fruit🍎" }),
       Main5=Window:AddTab({ Title="plan vs branro🌲🐘t" }),
       Settings = Window:AddTab({ Title = "⚙️Cài đặt" }),
       Main6=Window:AddTab({ Title="chức năng linh tinh" }),
}
    Tabs.Main0:AddButton({
    Title = "tiktok bạn:)",
    Description = "oách xà lách vô cùng",
    Callback = function()
        setclipboard("https://www.tiktok.com/@jannie3342?_t=ZS-90QsJQ5j0NO&_r=1")
    end
})

    Tabs.Main0:AddButton({
    Title = "tik",
    Description = "làm chơi thui",
    Callback = function()
        setclipboard("https://www.tiktok.com/@b.yt03?_t=ZS-90QsHokNlwN&_r=1")
    end
})

    Tabs.Main0:AddButton({
    Title = "tiktok",
    Description = "fl tiktok để biết thêm nhiều script",
    Callback = function()
        setclipboard("https://www.tiktok.com/@b.yt03?_t=ZS-90QsHmSjaiu&_r=1")
    end
})
Tabs.Main1:AddButton({
    Title="speed hub🌱",
    Description="script này ngon á đủ chức năng cả😃",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))()
  end
})

Tabs.Main1:AddButton({
    Title="ThundeZ⚡",
    Description="cái này cũng ngon ",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/ThundeZ/GrowAGardenScript/refs/heads/main/ThunderZHub.lua"))()
  end
})

Tabs.Main1:AddButton({
    Title="Nathub",
    Description="ổn 😋",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://get.nathub.xyz/loader"))()
  end
})

Tabs.Main2:AddButton({
    Title="utopia",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}

  end
})

Tabs.Main2:AddButton({
    Title="airhub",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/og2xn/AirHubs/refs/heads/main/Protected_3429231241525986.lua"))()
  end
})

Tabs.Main2:AddButton({
    Title="moondiety",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet('https://raw.githubusercontent.com/m00ndiety/Moondiety/refs/heads/main/Loader'))()
  end
})

Tabs.Main2:AddButton({
    Title="B0oe",
    Description="còn dùng đc",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://pastefy.app/B0oeOAsg/raw"))()
  end
})

Tabs.Main2:AddButton({
    Title="VN 🇻🇳🇻🇳🇻🇳",
    Description="script của ng việt làm 🇻🇳",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/replit8173/VietnamHub/refs/heads/main/VietnamseHub.lua", true))()
  end
})

Tabs.Main2:AddButton({
    Title="chillhub😌",
    Description="cái này ổn dùng ngon no key",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua"))()
  end
})

Tabs.Main2:AddButton({
    Title="ajjan👨‍💻",
    Description=" script này điều khiển cả ng chơi luôn mà 😀",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/onliengamerop/Steal-a-brainrot/refs/heads/main/Protected_3771863424757750.lua.txt"))()
  end
})

Tabs.Main2:AddButton({
    Title="Lemon update",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://pastefy.app/MJw2J4T6/raw"))()
  end
})

Tabs.Main2:AddButton({
    Title="Kurdhub😍",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Ninja10908/S4/refs/heads/main/Kurdhub"))()
  end
})

Tabs.Main2:AddButton({
    Title="khngscript hub",
    Description="duper bram rot",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/BestScript-cmd/Khangdz28/refs/heads/main/KhgScripttt"))()
  end
})

Tabs.Main2:AddButton({
    Title="script tạo seven vip",
    Description="tạo seven vip",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/JoshzzAlteregooo/FreePrivateServer/refs/heads/main/UniversalFreePrivateServerByJoshzz"))()
  end
})

Tabs.Main2:AddButton({
    Title="ZZZz hub ",
    Description="cướp tàng hình",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://pastefy.app/DHyT4Zoi/raw"))()
  end
})

Tabs.Main:AddButton({
    Title="bonkhub",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://bonkhub.online/loader.lua",true))()
  end
})

Tabs.Main3:AddButton({
    Title="1 bản khá ngon ới",
    Description="ko nên quay có nhạc bản quyền",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/DarkenedEssence/Elude/refs/heads/main/External/Diamond/ELUDESJI.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="fam kẹo cps 😋🍥",
    Description="mới nên còn dùng đc",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/c87b3621b22ecc2c8b474f95c47ecb40.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="fam keo siêu xịn :))",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet('https://raw.githubusercontent.com/MQPS7/99-Night-in-the-Forset/refs/heads/main/CandyFarm'))()
  end
})

Tabs.Main3:AddButton({
    Title="FNdayfam",
    Description=" Siêu script vừa fam ngày vừa kim cương siêu ngon",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet('https://raw.githubusercontent.com/caomod2077/Script/refs/heads/main/FNDayFarm.lua'))()
  end
})

Tabs.Main3:AddButton({
    Title="thunder",
    Description="cái này auto đam ngày và kc",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/NAVAAI098/Thunder-Hub/main/Kaitun.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="combo new😍",
    Description="no key ngon á full tiếng việt",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/checkurasshole/Trt/refs/heads/main/999NIGH"))()
  end
})

Tabs.Main3:AddButton({
    Title="FoxnameHub",
    Description="cái này no key mà ngon 😋",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/caomod2077/Script/refs/heads/main/FoxnameHub.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="H4x",
    Description="có key ngon lắm😋😋",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/H4xScripts/Loader/refs/heads/main/loader.lua", true))()
  end
})

Tabs.Main3:AddButton({
    Title="NEW script",
    Description=" key nè (toatsyissexy) có thể sẽ thay đổi",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/nouralddin-abdullah/99-night/refs/heads/main/main-en.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="auto chơi game",
    Description=" nokey",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Rx1m/CpsHub/refs/heads/main/DayFarm%E2%84%A2",true))()
  end
})

Tabs.Main3:AddButton({
    Title="auto đam kim cương",
    Description=" ngon á nó chỉ tìm sever có kim cương chỉ cần bật",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
getgenv().hop = "old"
getgenv().reducelag = true
getgenv().blackscreen = false
getgenv().AutoFarm = false
getgenv().autoexecuter = true
getgenv().WebhookURL = "" --If not used do not write anything
loadstring(game:HttpGet("https://raw.githubusercontent.com/caomod2077/Script/refs/heads/main/FoxnameFarmdiamond.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="void",
    Description="nokey ",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/VapeVoidware/VW-Add/main/nightsintheforest.lua", true))()
  end
})

Tabs.Main3:AddButton({
    Title="cps",
    Description="._.",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Rx1m/CpsHub/refs/heads/main/Hub",true))()
  end
})

Tabs.Main3:AddButton({
    Title="bất con mẹ nó tử",
    Description=" chỉ bất tử no key",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/ProBaconHub/DATABASE/refs/heads/main/99%20Nights%20in%20the%20Forest/Infinite%20Health.lua"))()
  end
})

Tabs.Main3:AddButton({
    Title="auto fam diamon",
    Description=" đểu hơn bản trên",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Bubu2k/Rubutv/refs/heads/main/Framkimcuong",true))()
  end
})

Tabs.Main3:AddButton({
    Title="vector",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/AAwful /Vector_Hub/0/v2"))()
  end
})

Tabs.Main3:AddButton({
    Title=".fam diamon",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet('https://raw.githubusercontent.com/MQPS7/99-Night-in-the-Forset/refs/heads/main/Gfarm'))()
  end
})

Tabs.Main3:AddButton({
    Title="auto fam kc cps",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Rx1m/CpsHub/refs/heads/main/CpsX",true))()
  end
})

Tabs.Main3:AddButton({
    Title="cps hub",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Rx1m/CpsHub/refs/heads/main/Hub",true))()
  end
})

Tabs.Main4:AddButton({
    Title="Red😍",
    Description="ngon nhất hiênh tại r",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/tlredz/Scripts/refs/heads/main/main.luau"))(Settings)
  end
})

Tabs.Main4:AddButton({
    Title="BlueX",
    Description="",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/Dev-BlueX/BlueX-Hub/refs/heads/main/Main.lua"))()
  end
})

Tabs.Main5:AddButton({
    Title="speed hub",
    Description="khá ổn đầy đủ",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))()
  end
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local StarterGui = game:GetService("StarterGui")

Tabs.Settings:AddToggle("LagFix_Super", {
    Title = "🧹 Fix Lag  siêu cấp xoá",
    Description = "Xoá toàn bộ map, giữ lại nhân vật và đồ hoạ cơ bản nhất",
    Default = false,
    Callback = function(state)
        if state then
            -- Thông báo GUI
            StarterGui:SetCore("SendNotification", {
                Title = "⚙️ Fix Lag Siêu Mạnh",
                Text = "Đang xoá map và giảm đồ hoạ...",
                Duration = 4
            })

            -- Giảm chất lượng hình ảnh
            settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
            game.Lighting.GlobalShadows = false
            game.Lighting.FogEnd = 9e9

            -- Xoá map lớn: chỉ giữ lại nhân vật và camera
            for _,v in pairs(workspace:GetChildren()) do
                if not (v == LocalPlayer.Character or v.Name == "Camera" or v:FindFirstChildOfClass("Humanoid")) then
                    v:Destroy()
                end
            end

            -- Xoá mọi hiệu ứng
            for _,v in pairs(workspace:GetDescendants()) do
                if v:IsA("Decal") or v:IsA("Texture") or v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") then
                    v:Destroy()
                elseif v:IsA("BasePart") then
                    v.Material = Enum.Material.Plastic
                    v.Reflectance = 0
                end
            end

            StarterGui:SetCore("SendNotification", {
                Title = "✅ Thành công!",
                Text = "Fix lag siêu mạnh đã bật. Map lớn đã bị xoá.",
                Duration = 5
            })
            print("🔥 Fix lag siêu mạnh đã bật - map lớn đã bị xoá")

        else
            StarterGui:SetCore("SendNotification", {
                Title = "❌ Đã tắt Fix Lag",
                Text = "Muốn khôi phục map thì reload game nha.",
                Duration = 5
            })
            print("❌ Fix lag siêu mạnh đã tắt (cần reload map để khôi phục)")
        end
    end
})
Tabs.Settings:AddToggle("AutoFixLag", {
    Title = "⚙️ Fix Lag Pro",
    Description = "Bật để tự tối ưu hiệu suất liên tục",
    Default = false,
    Callback = function(state)
        if state then
            -- Khi bật ✅
            print("🟢 Đã bật Auto Fix Lag")

            -- ⚙️ Toàn bộ code fix lag auto
            local Players = game:GetService("Players")
            local Lighting = game:GetService("Lighting")
            local Workspace = game:GetService("Workspace")
            local RunService = game:GetService("RunService")
            local player = Players.LocalPlayer

            local function safeCall(fn, ...)
                local ok, res = pcall(fn, ...)
                return ok, res
            end

            local function applyLightingFix()
                safeCall(function()
                    Lighting.GlobalShadows = false
                    Lighting.FogEnd = 999999
                    Lighting.FogStart = 999999
                    Lighting.Brightness = 1
                    Lighting.EnvironmentDiffuseScale = 0
                    Lighting.EnvironmentSpecularScale = 0
                    for _, e in ipairs(Lighting:GetChildren()) do
                        if e:IsA("BlurEffect") or e:IsA("BloomEffect")
                        or e:IsA("ColorCorrectionEffect") or e:IsA("DepthOfFieldEffect")
                        or e:IsA("SunRaysEffect") or e:IsA("Atmosphere") then
                            e.Enabled = false
                        end
                    end
                end)
            end

            local function applyTerrainFix()
                safeCall(function()
                    local t = Workspace:FindFirstChildOfClass("Terrain")
                    if t then
                        t.WaterWaveSize = 0
                        t.WaterReflectance = 0
                        t.WaterTransparency = 1
                        t.Decoration = false
                    end
                end)
            end

            local function applyCameraFix()
                safeCall(function()
                    local cam = Workspace.CurrentCamera
                    if cam then cam.FieldOfView = 70 end
                end)
            end

            local function applyPlayerFix()
                safeCall(function()
                    if player and player.Character then
                        for _, c in ipairs(player.Character:GetChildren()) do
                            if c:IsA("Accessory") or c:IsA("Clothing") or c:IsA("Shirt") or c:IsA("Pants") then
                                c:Destroy()
                            end
                        end
                    end
                end)
            end

            local function applyObjectSimplify(obj)
                safeCall(function()
                    if not obj or not obj.Parent then return end
                    if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam")
                    or obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("Sparkles") then
                        obj.Enabled = false
                        return
                    end
                    if obj:IsA("Decal") or obj:IsA("Texture") then
                        obj.Transparency = 1
                        return
                    end
                    if obj:IsA("BasePart") then
                        local s = obj.Size
                        if s and s.X and s.Y and s.Z then
                            if s.X < 1 and s.Y < 1 and s.Z < 1 then
                                obj.Transparency = 1
                            end
                        end
                        obj.Material = Enum.Material.SmoothPlastic
                        obj.Reflectance = 0
                    end
                end)
            end

            local function applyToAllExisting()
                applyLightingFix()
                applyTerrainFix()
                applyCameraFix()
                applyPlayerFix()
                for _, obj in ipairs(Workspace:GetDescendants()) do
                    applyObjectSimplify(obj)
                end
                safeCall(function() collectgarbage("collect") end)
            end

            Workspace.DescendantAdded:Connect(function(obj)
                task.defer(function()
                    applyObjectSimplify(obj)
                end)
            end)

            local sweeping = false
            task.spawn(function()
                applyToAllExisting()
                while state do
                    task.wait(1)
                    if not sweeping then
                        sweeping = true
                        task.spawn(function()
                            local all = Workspace:GetDescendants()
                            local chunkSize = 250
                            local i = 1
                            while i <= #all do
                                local j = math.min(i + chunkSize - 1, #all)
                                for k = i, j do
                                    applyObjectSimplify(all[k])
                                end
                                i = j + 1
                                task.wait(0)
                            end
                            applyLightingFix()
                            applyTerrainFix()
                            applyCameraFix()
                            applyPlayerFix()
                            safeCall(function() collectgarbage("collect") end)
                            sweeping = false
                        end)
                    end
                end
            end)

        else
            -- Khi tắt 🔴
            print("🔴 Đã tắt Auto Fix Lag")
        end
    end
})
Tabs.Main6:AddButton({
    Title="ambot :))",
    Description="am các game bắ. súng góc 1",
    Callback=function()
	  local Settings = {
  JoinTeam = "Pirates"; -- Pirates/Marines
  Translator = true; -- true/false
}
-- AIMBOT TRAINER (Upgrade Full Auto) - Learning / Studio only
-- Dùng cho học/testing trong Roblox Studio
-- Dán vào StarterPlayer -> StarterPlayerScripts (LocalScript)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Camera = workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

-- ==== UI Creation (persistent across respawn) ====
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AimbotPanel"
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

local frame = Instance.new("Frame")
frame.Name = "MainFrame"
frame.Size = UDim2.new(0, 200, 0, 110)

local savedXScale = LocalPlayer:GetAttribute("Aimbot_XScale")
local savedXOffset = LocalPlayer:GetAttribute("Aimbot_XOffset")
local savedYScale = LocalPlayer:GetAttribute("Aimbot_YScale")
local savedYOffset = LocalPlayer:GetAttribute("Aimbot_YOffset")

if savedXScale and savedXOffset and savedYScale and savedYOffset then
	frame.Position = UDim2.new(savedXScale, savedXOffset, savedYScale, savedYOffset)
else
	frame.Position = UDim2.new(0.5, -100, 0.78, 0)
end

frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.Active = true
frame.Parent = screenGui

local uic = Instance.new("UICorner", frame)
uic.CornerRadius = UDim.new(0,8)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,0,0,28)
title.BackgroundTransparency = 1
title.Text = "Aimbot Trainer"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18

local masterBtn = Instance.new("TextButton", frame)
masterBtn.Size = UDim2.new(1, -20, 0, 28)
masterBtn.Position = UDim2.new(0,10,0,34)
masterBtn.Text = "🔴 SCRIPT: OFF"
masterBtn.Font = Enum.Font.SourceSans
masterBtn.TextSize = 16
masterBtn.BackgroundColor3 = Color3.fromRGB(120, 0, 0)
masterBtn.TextColor3 = Color3.fromRGB(255,255,255)

local v1Btn = Instance.new("TextButton", frame)
v1Btn.Size = UDim2.new(0.5, -12, 0, 28)
v1Btn.Position = UDim2.new(0,10,0,68)
v1Btn.Text = "V1: CLICK SHOOT"
v1Btn.Font = Enum.Font.SourceSans
v1Btn.TextSize = 14
v1Btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
v1Btn.TextColor3 = Color3.fromRGB(255,255,255)

local v2Btn = Instance.new("TextButton", frame)
v2Btn.Size = UDim2.new(0.5, -12, 0, 28)
v2Btn.Position = UDim2.new(0.5,6,0,68)
v2Btn.Text = "V2: CAMERA FOLLOW"
v2Btn.Font = Enum.Font.SourceSans
v2Btn.TextSize = 14
v2Btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
v2Btn.TextColor3 = Color3.fromRGB(255,255,255)

-- ==== Dragging ====
local dragging = false
local dragStart
local startPos
frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
				local p = frame.Position
				LocalPlayer:SetAttribute("Aimbot_XScale", p.X.Scale)
				LocalPlayer:SetAttribute("Aimbot_XOffset", p.X.Offset)
				LocalPlayer:SetAttribute("Aimbot_YScale", p.Y.Scale)
				LocalPlayer:SetAttribute("Aimbot_YOffset", p.Y.Offset)
			end
		end)
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
		local delta = input.Position - dragStart
		frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)

-- ==== State vars ====
local enabled = false
local V1_enabled = false
local V2_enabled = false

local currentTarget = nil
local targetHumanoidConn = nil
local targetHealthConn = nil
local targetHighlight = nil

-- helper: is valid target
local function isValidTarget(plr)
	if not plr or plr == LocalPlayer then return false end
	if not plr.Character then return false end
	local humanoid = plr.Character:FindFirstChild("Humanoid")
	local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
	if not humanoid or not hrp then return false end
	if humanoid.Health <= 0 then return false end
	local myTeam = LocalPlayer.Team
	if myTeam and plr.Team == myTeam then return false end
	return true
end

-- CHECK LINE OF SIGHT: trả về true nếu KHÔNG bị vật cản (tức là có LOS)
local function hasLineOfSight(player, target)
	if not player or not target then return false end
	if not player.Character then return false end
	if not target.Character then return false end

	local originPart = player.Character:FindFirstChild("Head") or player.Character:FindFirstChild("HumanoidRootPart")
	local targetPart = target.Character:FindFirstChild("Head") or target.Character:FindFirstChild("HumanoidRootPart")
	if not originPart or not targetPart then return false end

	local origin = originPart.Position
	local direction = (targetPart.Position - origin)
	if direction.Magnitude <= 0 then return true end

	local rp = RaycastParams.new()
	-- exclude self so ray won't hit the player's own parts
	rp.FilterDescendantsInstances = {player.Character}
	rp.FilterType = Enum.RaycastFilterType.Exclude
	rp.IgnoreWater = true

	local ray = workspace:Raycast(origin, direction, rp)
	if not ray then
		-- nothing hit -> clear line
		return true
	end

	-- if ray hit something that is part of the target's character, then visible
	if ray.Instance and ray.Instance:IsDescendantOf(target.Character) then
		return true
	end

	-- else ray hit some other object => blocked
	return false
end

-- find nearest visible enemy (prioritize LOS)
local function getNearestEnemy()
	local nearest = nil
	local shortest = math.huge
	if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
		return nil
	end
	local myPos = LocalPlayer.Character.HumanoidRootPart.Position
	for _, p in pairs(Players:GetPlayers()) do
		if isValidTarget(p) then
			local hrp = p.Character:FindFirstChild("HumanoidRootPart")
			if hrp then
				-- check LOS first
				if hasLineOfSight(LocalPlayer, p) then
					local d = (hrp.Position - myPos).Magnitude
					if d < shortest then
						shortest = d
						nearest = p
					end
				end
			end
		end
	end
	-- if no visible target found, return nil (so script won't lock through walls)
	return nearest
end

-- create target marker
local function createTargetMarker(target)
	if not target or not target.Character then return nil end
	local head = target.Character:FindFirstChild("Head")
	if not head then return nil end
	local bb = Instance.new("BillboardGui")
	bb.Name = "Aimbot_TargetMark"
	bb.Adornee = head
	bb.Size = UDim2.new(0,100,0,28)
	bb.StudsOffset = Vector3.new(0, 1.4, 0)
	bb.AlwaysOnTop = true
	bb.Parent = PlayerGui

	local label = Instance.new("TextLabel", bb)
	label.Size = UDim2.new(1,0,1,0)
	label.BackgroundTransparency = 1
	label.Text = "TARGET"
	label.Font = Enum.Font.SourceSansBold
	label.TextSize = 18
	label.TextColor3 = Color3.fromRGB(255,50,50)
	label.TextStrokeTransparency = 0.6

	return bb
end

-- clear current target
local function clearCurrentTarget()
	if targetHighlight and targetHighlight.Parent then
		targetHighlight:Destroy()
		targetHighlight = nil
	end
	if targetHealthConn then
		targetHealthConn:Disconnect()
		targetHealthConn = nil
	end
	if targetHumanoidConn then
		targetHumanoidConn:Disconnect()
		targetHumanoidConn = nil
	end
	currentTarget = nil
end

-- set target
local function setCurrentTarget(p)
	if p == currentTarget then return end
	clearCurrentTarget()
	if not p then return end
	currentTarget = p

	pcall(function()
		targetHighlight = createTargetMarker(p)
	end)

	if p.Character then
		local humanoid = p.Character:FindFirstChild("Humanoid")
		if humanoid then
			targetHealthConn = humanoid.HealthChanged:Connect(function(h)
				if h <= 0 then clearCurrentTarget() end
			end)
			targetHumanoidConn = humanoid.Died:Connect(function() clearCurrentTarget() end)
		end
	end
end

-- shoot function
local function shootAtTarget(target)
	if not target or not target.Character then return end
	-- ensure visible
	if not hasLineOfSight(LocalPlayer, target) then
		-- blocked by obstacle; do not fire
		print("🔴 Target blocked by obstacle - not firing")
		return
	end

	local head = target.Character:FindFirstChild("Head")
	local hrp = target.Character:FindFirstChild("HumanoidRootPart")
	if not head and not hrp then return end
	local aimPos = (head and head.Position) or hrp.Position

	local rp = RaycastParams.new()
	rp.FilterType = Enum.RaycastFilterType.Blacklist
	if LocalPlayer.Character then rp.FilterDescendantsInstances = {LocalPlayer.Character} end

	local origin = Camera.CFrame.Position
	local direction = (aimPos - origin)
	local ray = workspace:Raycast(origin, direction, rp)

	local mark = Instance.new("Part")
	mark.Name = "AimbotHitMarker"
	mark.Size = Vector3.new(0.2,0.2,0.2)
	mark.Shape = Enum.PartType.Ball
	mark.Anchored = true
	mark.CanCollide = false
	mark.Material = Enum.Material.Neon
	mark.Color = Color3.fromRGB(255, 60, 60)
	if ray and ray.Position then
		mark.CFrame = CFrame.new(ray.Position)
	else
		mark.CFrame = CFrame.new(aimPos)
	end
	mark.Parent = workspace
	game:GetService("Debris"):AddItem(mark, 0.35)

	if target then
		print(("🟢 Fire demo -> %s (hp: %s)"):format(target.Name, tostring((target.Character and target.Character:FindFirstChild("Humanoid") and target.Character.Humanoid.Health) or "N/A")))
	end
end

-- Mouse click V1
local mouseConn = nil
local function bindMouseClick()
	if mouseConn then return end
	mouseConn = Mouse.Button1Down:Connect(function()
		if enabled and V1_enabled then
			local tgt = getNearestEnemy()
			setCurrentTarget(tgt)
			if tgt then
				shootAtTarget(tgt)
			else
				print("No visible enemy to shoot (blocked or none)")
			end
		end
	end)
end
local function unbindMouseClick()
	if mouseConn then
		mouseConn:Disconnect()
		mouseConn = nil
	end
end

-- Main loop: V2 camera follow & auto nearest target
RunService.RenderStepped:Connect(function()
	if not enabled then return end
	if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end

	if V2_enabled then
		local tgt = getNearestEnemy()
		setCurrentTarget(tgt)
		if tgt and tgt.Character and tgt.Character:FindFirstChild("Head") then
			-- ensure visible before locking camera
			if hasLineOfSight(LocalPlayer, tgt) then
				local headPos = tgt.Character.Head.Position
				local camPos = Camera.CFrame.Position
				Camera.CFrame = CFrame.new(camPos, headPos)
			else
				-- target blocked: optionally clear marker or keep until visible
				-- clearCurrentTarget()
			end
		end
	end
end)

-- Buttons events
masterBtn.MouseButton1Click:Connect(function()
	enabled = not enabled
	if enabled then
		masterBtn.Text = "🟢 SCRIPT: ON"
		masterBtn.BackgroundColor3 = Color3.fromRGB(0,170,0)
		bindMouseClick()
	else
		masterBtn.Text = "🔴 SCRIPT: OFF"
		masterBtn.BackgroundColor3 = Color3.fromRGB(120,0,0)
		unbindMouseClick()
		clearCurrentTarget()
	end
end)

v1Btn.MouseButton1Click:Connect(function()
	V1_enabled = not V1_enabled
	if V1_enabled then
		v1Btn.BackgroundColor3 = Color3.fromRGB(0,150,200)
	else
		v1Btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
	end
	if enabled and V1_enabled then bindMouseClick() end
end)

v2Btn.MouseButton1Click:Connect(function()
	V2_enabled = not V2_enabled
	if V2_enabled then
		v2Btn.BackgroundColor3 = Color3.fromRGB(200,80,80)
	else
		v2Btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
	end
end)

-- CharacterAdded handler
LocalPlayer.CharacterAdded:Connect(function(char)
	char:WaitForChild("HumanoidRootPart", 5)
	if not screenGui.Parent then
		screenGui.Parent = PlayerGui
	end
	local sx = LocalPlayer:GetAttribute("Aimbot_XScale")
	local xo = LocalPlayer:GetAttribute("Aimbot_XOffset")
	local sy = LocalPlayer:GetAttribute("Aimbot_YScale")
	local yo = LocalPlayer:GetAttribute("Aimbot_YOffset")
	if sx and xo and sy and yo then
		frame.Position = UDim2.new(sx, xo, sy, yo)
	end
end)

-- Cleanup
LocalPlayer.AncestryChanged:Connect(function()
	if not PlayerGui:IsDescendantOf(game) then
		unbindMouseClick()
	end
end)

print("Aimbot Trainer FULL AUTO (learning demo) loaded. V1 -> click shoot nearest visible, V2 -> camera follow nearest visible.")
  end
})
